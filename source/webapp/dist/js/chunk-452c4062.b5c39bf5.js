(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-452c4062"],{"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1c4c":function(t,e,n){"use strict";var r=n("9b43"),i=n("5ca1"),a=n("4bf8"),o=n("1fa8"),s=n("33a4"),c=n("9def"),u=n("f1ae"),l=n("27ee");i(i.S+i.F*!n("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,d=a(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,b=void 0!==p,_=0,y=l(d);if(b&&(p=r(p,v>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(e=c(d.length),n=new h(e);e>_;_++)u(n,_,b?p(d[_],_):d[_]);else for(f=y.call(d),n=new h;!(i=f.next()).done;_++)u(n,_,b?o(f,p,[i.value,_],!0):i.value);return n.length=_,n}})},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"549b":function(t,e,n){"use strict";var r=n("d864"),i=n("63b6"),a=n("241e"),o=n("b0dc"),s=n("3702"),c=n("b447"),u=n("20fd"),l=n("7cd6");i(i.S+i.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,d=a(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,b=void 0!==p,_=0,y=l(d);if(b&&(p=r(p,v>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(e=c(d.length),n=new h(e);e>_;_++)u(n,_,b?p(d[_],_):d[_]);else for(f=y.call(d),n=new h;!(i=f.next()).done;_++)u(n,_,b?o(f,p,[i.value,_],!0):i.value);return n.length=_,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),i=n("d8e8"),a=n("4bf8"),o=n("79e5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),i(t))}})},"5df3":function(t,e,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,n){var r=n("ca5a")("meta"),i=n("d3f4"),a=n("69a8"),o=n("86cc").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("79e5")((function(){return c(Object.preventExtensions({}))})),l=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},d=function(t,e){if(!a(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},h=function(t){return u&&v.NEED&&c(t)&&!a(t,r)&&l(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},"75fc":function(t,e,n){"use strict";var r=n("a745"),i=n.n(r);function a(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var o=n("774e"),s=n.n(o),c=n("c8bb"),u=n.n(c);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return a(t)||l(t)||f()}n.d(e,"a",(function(){return d}))},"774e":function(t,e,n){t.exports=n("d2d5")},9003:function(t,e,n){var r=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"95d5":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),a=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(r(e))}},a745:function(t,e,n){t.exports=n("f410")},b39a:function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,n){"use strict";var r=n("86cc").f,i=n("2aeb"),a=n("dcbc"),o=n("9b43"),s=n("f605"),c=n("4a59"),u=n("01f9"),l=n("d53b"),f=n("7a56"),d=n("9e1e"),h=n("67ab").fastKey,v=n("b39a"),p=d?"_s":"size",b=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=r&&c(r,n,t[u],t)}));return a(l.prototype,{clear:function(){for(var t=v(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),r=b(n,t);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[p]--}return!!r},forEach:function(t){v(this,e);var n,r=o(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!b(v(this,e),t)}}),d&&r(l.prototype,"size",{get:function(){return v(this,e)[p]}}),l},def:function(t,e,n){var r,i,a=b(t,e);return a?a.v=n:(t._l=a={i:i=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=a),r&&(r.n=a),t[p]++,"F"!==i&&(t._i[i]=a)),t},getEntry:b,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=v(t,e),this._k=n,this._l=void 0}),(function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(e)}}},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},e0b8:function(t,e,n){"use strict";var r=n("7726"),i=n("5ca1"),a=n("2aba"),o=n("dcbc"),s=n("67ab"),c=n("4a59"),u=n("f605"),l=n("d3f4"),f=n("79e5"),d=n("5cc5"),h=n("7f20"),v=n("5dbc");t.exports=function(t,e,n,p,b,_){var y=r[t],m=y,g=b?"set":"add",w=m&&m.prototype,x={},A=function(t){var e=w[t];a(w,t,"delete"==t?function(t){return!(_&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof m&&(_||w.forEach&&!f((function(){(new m).entries().next()})))){var E=new m,O=E[g](_?{}:-0,1)!=E,k=f((function(){E.has(1)})),B=d((function(t){new m(t)})),j=!_&&f((function(){var t=new m,e=5;while(e--)t[g](e,e);return!t.has(-0)}));B||(m=e((function(e,n){u(e,m,t);var r=v(new y,e,m);return void 0!=n&&c(n,b,r[g],r),r})),m.prototype=w,w.constructor=m),(k||j)&&(A("delete"),A("has"),b&&A("get")),(j||O)&&A(g),_&&w.clear&&delete w.clear}else m=p.getConstructor(e,t,b,g),o(m.prototype,n),s.NEED=!0;return h(m,t),x[t]=m,i(i.G+i.W+i.F*(m!=y),x),_||p.setStrong(m,t,b),m}},f2c3:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-col",[n("b-row",{staticClass:"my-1",attrs:{"align-h":"center"}},[n("div",{staticClass:"wrapper"},[t._v("\n        Confidence Threshold"),n("br"),n("input",{attrs:{type:"range",value:"90",min:"55",max:"99",step:"1"},on:{click:t.updateConfidence}}),t._v("\n        "+t._s(t.Confidence)+"%"),n("br")])]),t.isBusy?n("div",{staticClass:"wrapper"},[n("Loading")],1):t._e(),n("b-row",{staticClass:"my-1",attrs:{"align-h":"center"}},[n("div",{staticClass:"wrapper"},[n("br"),t._l(t.sorted_unique_labels,(function(e){return[t.boxes_available.includes(e[0])?[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-dark",title:e[1],size:"sm",pill:""},on:{click:function(n){return t.updateMarkers(e[0])}}},[t._v("\n              "+t._s(e[0]+"*")+"\n            ")]),t._v("  \n          ")]:[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-secondary",title:e[1],size:"sm",pill:""},on:{click:function(n){return t.updateMarkers(e[0])}}},[t._v("\n              "+t._s(e[0])+"\n            ")]),t._v("  \n          ")]]}))],2)]),n("b-row",{staticClass:"my-1",attrs:{"align-h":"center"}},[!1===t.isBusy?n("div",{staticClass:"wrapper"},[n("br"),n("p",{staticClass:"text-muted"},[t._v("\n          ("+t._s(t.count_labels)+" identified objects, "+t._s(t.count_distinct_labels)+" unique)\n        ")]),n("hr"),n("p",{staticClass:"text-muted"},[t._v("\n          * Indicates bounding boxes are available.\n        ")])]):t._e()])],1),n("b-button",{attrs:{type:"button"},on:{click:function(e){return t.saveFile()}}},[t._v("\n    Download Data\n  ")])],1)},i=[],a=(n("8e6e"),n("456d"),n("1c4c"),n("7f7f"),n("6762"),n("2fdb"),n("75fc")),o=(n("55dd"),n("bd86")),s=(n("ac6a"),n("5df3"),n("f400"),n("2f62")),c=n("3a5e");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"Celebrities",components:{Loading:c["a"]},data:function(){return{Confidence:90,high_confidence_data:[],elasticsearch_data:[],boxes_available:[],count_distinct_labels:0,count_labels:0,isBusy:!1,operator:"celebrity_detection",canvasRefreshInterval:void 0,timeseries:new Map,selectedLabel:""}},computed:l({},Object(s["b"])(["player"]),{sorted_unique_labels:function(){var t=this.elasticsearch_data,e=new Map;t.forEach(function(t){e.set(t.Name,e.get(t.Name)?e.get(t.Name)+1:1),t.BoundingBox&&this.saveBoxedLabel(t.Name)}.bind(this));var n=new Map(Object(a["a"])(e.entries()).slice().sort((function(t,e){return e[1]-t[1]})));return n.delete(void 0),this.countLabels(n.size,t.length),n}}),watch:{selectedLabel:function(){this.chartData()},elasticsearch_data:function(){this.chartData()}},deactivated:function(){console.log("deactivated component:",this.operator),this.boxes_available=[],this.selectedLabel="",clearInterval(this.canvasRefreshInterval);var t=document.getElementById("canvas");if(t)var e=t.getContext("2d");e&&e.clearRect(0,0,t.width,t.height)},activated:function(){console.log("activated component:",this.operator),this.fetchAssetData()},beforeDestroy:function(){this.high_confidence_data=[],this.elasticsearch_data=[],this.count_distinct_labels=0,this.count_labels=0,clearInterval(this.canvasRefreshInterval)},methods:{saveBoxedLabel:function(t){this.boxes_available.includes(t)||this.boxes_available.push(t)},countLabels:function(t,e){this.count_distinct_labels=t,this.count_labels=e},saveFile:function(){var t=this.elasticsearch_data,e=new Blob([t],{type:"text/plain"}),n=document.createEvent("MouseEvents"),r=document.createElement("a");r.download="data.json",r.href=window.URL.createObjectURL(e),r.dataset.downloadurl=["text/json",r.download,r.href].join(":"),n.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},updateConfidence:function(t){this.isBusy=!this.isBusy,this.Confidence=t.target.value,this.player.markers.removeAll(),this.fetchAssetData()},updateMarkers:function(t){this.selectedLabel=t,this.boxes_available=[],clearInterval(this.canvasRefreshInterval);var e=document.getElementById("canvas"),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.strokeStyle="red",n.font="15px Arial",n.textAlign="center",n.textBaseline="middle",n.fillStyle="red";var r=new Map,i=[],a=this.elasticsearch_data;a.forEach(function(n){if(n.Name===t&&(i.push({time:n.Timestamp/1e3,text:n.Name,overlayText:n.Name}),n.BoundingBox)){var a=Math.round(n.Timestamp/100),o={instance:0,timestamp:Math.ceil(n.Timestamp/100),name:n.Name,confidence:(1*n.Confidence).toFixed(2),x:n.BoundingBox.Left*e.width,y:n.BoundingBox.Top*e.height,width:n.BoundingBox.Width*e.width,height:n.BoundingBox.Height*e.height};r.set(a,[o])}}.bind(this)),r.size>0&&this.drawBoxes(r),this.player.markers.removeAll(),this.player.markers.add(i)},fetchAssetData:function(){var t=this;fetch("https://search/_search?q=AssetId:"+this.$route.params.asset_id+" Confidence:>"+this.Confidence+" Operator:"+this.operator+"&default_operator=AND&size=10000",{method:"get"}).then((function(e){return e.json().then((function(t){return{data:t,status:e.status}})).then((function(e){var n=[];e.data.hits.hits.forEach((function(t){n.push(t._source)})),t.elasticsearch_data=JSON.parse(JSON.stringify(n)),t.isBusy=!1}))}))},drawBoxes:function(t){var e=document.getElementById("canvas"),n=e.getContext("2d");void 0!=this.canvasRefreshInterval&&clearInterval(this.canvasRefreshInterval);var r=100,i=2,a=0;this.canvasRefreshInterval=setInterval(function(){a++,this.player.paused()||a%i!==0||(a=0,n.clearRect(0,0,e.width,e.height),n.beginPath(),n.strokeStyle="red",n.font="15px Arial",n.textAlign="center",n.textBaseline="middle",n.fillStyle="red");var r=Math.round(10*this.player.currentTime());if(t.has(r)){var o=t.get(r)[0];n.rect(o.x,o.y,o.width,o.height),n.fillText(o.name+" ("+o.confidence+"%)",o.x+o.width/2,o.y-10)}n.stroke()}.bind(this),r)},chartData:function(){var t=new Map;function e(e){t.has(e)?t.set(e,{x:e,y:t.get(e).y+1}):t.set(e,{x:e,y:1})}var n=this.elasticsearch_data;n.forEach(function(t){var n=Math.round(t.Timestamp);this.selectedLabel?t.Name===this.selectedLabel&&e(n):e(n)}.bind(this));var r=new Map(Object(a["a"])(t.entries()).slice().sort((function(t,e){return t[0]-e[0]}))),i=Array.from(r.values());this.$store.commit("updateTimeseries",i),this.$store.commit("updateSelectedLabel",this.selectedLabel)}}},d=f,h=n("2877"),v=Object(h["a"])(d,r,i,!1,null,null,null);e["default"]=v.exports},f400:function(t,e,n){"use strict";var r=n("c26b"),i=n("b39a"),a="Map";t.exports=n("e0b8")(a,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,a),t);return e&&e.v},set:function(t,e){return r.def(i(this,a),0===t?0:t,e)}},r,!0)},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-452c4062.b5c39bf5.js.map